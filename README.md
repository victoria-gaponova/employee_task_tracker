# Трекер задач сотрудников
Представляет собой API приложение обеспечивает рациональное распределение задач между сотрудниками и уведомляет их в Telegram о новых задачах.

## Стек Технологий

- Python 3.11
- Django 4.2.9
- Django REST Framework 3.14.0
- PostgreSQL 15.3
- drf-yasg 1.21.7
- redis 5.0.1
- celery 5.3.6
- django-celery-beat 2.5.0
- Flake8 для линтинга
- Black для форматирования кода

## Запуск проекта

Для запуска проекта выполните следующие шаги:

1. **Клонирование репозитория:**
   ```bash
   git clone https://github.com/victoria-gaponova/employee_task_tracker.git
   cd employee_task_tracker
2. **Создание и активация виртуального окружения:**
    ```bash
   python -m venv venv
   source venv/bin/activate  # Для Windows используйте venv\Scripts\activate
3. **Установка зависимостей:**
    ```bash
   pip install -r requirements.txt
4. **Создайте файл .env в корневой директории проекта и добавьте в него переменные среды, например:**
   * SECRETKEY='КЛЮЧ DJNAGO ПРОЕКТА'
   * DOMAIN_NAME='АДРЕС ДОМЕНА'
   * POSTGRES_HOST='ХОСТ БД'
   * POSTGRES_DB='НАЗВАНИЕ БД'
   * POSTGRES_USER='ИМЯ ПОЛЬЗОВАТЕЛЯ БД'
   * POSTGRES_PASSWORD='ПАРОЛЬ ОТ БД'
   * EMAIL_HOST_USER='<ВАША ЭЛЕКТРОННАЯ ПОЧТА>'
   * ADMIN_PASSWORD='<ПАРОЛЬ АДМИНА>'
   * CACHES_LOCATION='НАПРИМЕР redis://127.0.0.1:6379'
   * CELERY_BROKER_HOST='НАПРИМЕР redis://127.0.0.1:6379/0'
   * CHAT_ID_ADMIN='<ВАШ ID В ТГ>'
   * TELEGRAM_API_TOKEN='<ВАШ API ТОКЕН ДЛЯ ТЕЛЕГРАММ БОТА>'

5. **Настройка базы данных:**
   * Убедитесь, что у вас установлен PostgreSQL и он запущен.
   * Создайте базу данных для проекта через psql или pgAdmin.
   * Убедится что 4-й пункт выполнен (создан и заполнен файл .env)
6. **Применение миграций:**
   ```bash
   python manage.py migrate
7. **Запуск сервера:**
   ```bash
   python manage.py runserver
   
## Эндпоинты

**CRUD для сотрудников**:
- GET /users/employees/ - получение списка всех сотрудников.
- POST /users/employees/ - создание нового сотрудника.
- GET /users/employees/{id}/ - получение информации о конкретном сотруднике.
- PUT /users/employees/{id}/ - обновление информации о cотруднике.
- DELETE /users/employees/{id}/ - удаление сотрудника.

**CRUD для задач**:
- GET /tasks/ - получение списка всех задач.
- POST /tasks/ - создание новой задачи.
- GET /tasks/{id}/ - получение информации о конкретной задаче.
- PUT/tasks/{id}/- обновление информации о задаче.
- DELETE /tasks/{id}/ - удаление задачи.
- 
**Занятые сотрудники** 
- GET /users/employees/busy_employees/ - запрос списка сотрудников и их задач, отсортированный по количеству активных задач.

**Важные задачи**
- GET /tasks/important_tasks/ - запрос списка объектов [{Важная задача, Срок, [ФИО сотрудника]}]

   Важная задача представляет собой задачу, не взятую в работу, от которой зависят другие задачи, взятые в работу.

   Поиск сотрудников для выполнения важной задачи осуществляется по следующим критериям: 
  - сотрудник, выполняющий родительскую задачу, если у него назначено максимум на 2 задачи больше, чем у наименее загруженного сотрудника
  - наименее загруженный сотрудник.

##  Важный момент Celery для Windows

**Запустите Celery для отправки уведомлений сотрудникам о назначенных задачах:**
  
  ```bash
  celery -A employee_task_tracker worker -l info -P eventlet
  celery -A employee_task_tracker beat
  ```

## Автор проекта

Этот проект создан и поддерживается Викторией Гапоновой.

Если у вас есть вопросы или предложения по улучшению проекта, свяжитесь со мной по адресу victoria.gaponava@gmail.com.